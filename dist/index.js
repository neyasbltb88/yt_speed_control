!function(e){var t={};function n(i){if(t[i])return t[i].exports;var a=t[i]={i:i,l:!1,exports:{}};return e[i].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(i,a,function(t){return e[t]}.bind(null,a));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="https://localhost:3000/",n(n.s=7)}([function(e,t,n){window,e.exports=function(e){var t={};function n(i){if(t[i])return t[i].exports;var a=t[i]={i:i,l:!1,exports:{}};return e[i].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(i,a,function(t){return e[t]}.bind(null,a));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n.r(t);var l={},c={},u=function(e){return"object"===o(e)&&!Array.isArray(e)},h=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),l[t]?l[t]:(this.init(t,n,i),this)}var t,n;return t=e,(n=[{key:"set",value:function(e,t){if(!this.isDestroyed&&void 0!==t){var n=JSON.parse(localStorage.getItem(this.name));return n?(n[e]=t,localStorage.setItem(this.name,JSON.stringify(n)),this):this}}},{key:"get",value:function(e){if(!this.isDestroyed){var t=JSON.parse(localStorage.getItem(this.name));return t?t[e]:this}}},{key:"getAll",value:function(){if(!this.isDestroyed)return JSON.parse(localStorage.getItem(this.name))}},{key:"remove",value:function(e){if(!this.isDestroyed){var t=JSON.parse(localStorage.getItem(this.name));return t?(delete t[e],localStorage.setItem(this.name,JSON.stringify(t)),this):this}}},{key:"clear",value:function(){if(!this.isDestroyed)return localStorage.removeItem(this.name),this}},{key:"destroy",value:function(){this.isDestroyed||(c[this.name]=!0,delete l[this.name])}},{key:"isDestroyed",get:function(){return!!c[this.name]}},{key:"init",value:function(e,t,n){return delete c[e],this.name=e,function(e,t,n){var i=localStorage.getItem(e);if(!(e in localStorage&&i))return localStorage.setItem(e,JSON.stringify(t)),!0;try{if(i=JSON.parse(i),!u(i)||!u(t))return!1;if(n){var a=new Set(Object.keys(t));Object.keys(i).forEach((function(e){a.has(e)||delete i[e]}))}i=r(r({},t),i),localStorage.setItem(e,JSON.stringify(i))}catch(e){}}(e,t,n),l[e]=this,this}}])&&i(t.prototype,n),e}();t.default=h}]).default},function(e,t){e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxwYXRoIGZpbGw9IiNmZmYiIGQ9Ik03Ljc2NiAxLjY1OEwzLjAwOCA2LjA5NGw0LjQzNyA0Ljc1OC0xLjQ0OCAxLjM1TC4yMSA1Ljk5NyA2LjQxNi4yMXoiLz48L3N2Zz4="},function(e,t){e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxwYXRoIGZpbGw9IiNmZmYiIGQ9Ik0uMDQ4IDEuNjU4bDQuNzU4IDQuNDM2TC4zNyAxMC44NTJsMS40NDggMS4zNSA1Ljc4Ny02LjIwNUwxLjQuMjF6Ii8+PC9zdmc+"},function(e,t,n){var i=n(4);"string"==typeof i&&(i=[[e.i,i,""]]);var a={insert:"head",singleton:!1};n(6)(i,a);i.locals&&(e.exports=i.locals)},function(e,t,n){(e.exports=n(5)(!1)).push([e.i,".PlaybackRateBtn{color:#fff}.PlaybackRateBtn-inner{width:100%;height:100%;display:inline-flex !important;position:relative;justify-content:space-between}.PlaybackRateBtn-btn{display:flex;align-items:center;flex-grow:1;flex-basis:50%;opacity:.15;transition:opacity 250ms ease-in-out}.PlaybackRateBtn-btn:hover{opacity:1}.PlaybackRateBtn-minus{justify-content:flex-start}.PlaybackRateBtn-plus{justify-content:flex-end}.PlaybackRateBtn-chevron{width:8px;height:14px}.PlaybackRateBtn-value{position:absolute;top:0;bottom:0;left:0;right:0;display:flex;justify-content:center;align-items:center;z-index:-1}",""])},function(e,t,n){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=function(e,t){var n=e[1]||"",i=e[3];if(!i)return n;if(t&&"function"==typeof btoa){var a=(s=i,o=btoa(unescape(encodeURIComponent(JSON.stringify(s)))),l="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(o),"/*# ".concat(l," */")),r=i.sources.map((function(e){return"/*# sourceURL=".concat(i.sourceRoot).concat(e," */")}));return[n].concat(r).concat([a]).join("\n")}var s,o,l;return[n].join("\n")}(t,e);return t[2]?"@media ".concat(t[2],"{").concat(n,"}"):n})).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var i={},a=0;a<this.length;a++){var r=this[a][0];null!=r&&(i[r]=!0)}for(var s=0;s<e.length;s++){var o=e[s];null!=o[0]&&i[o[0]]||(n&&!o[2]?o[2]=n:n&&(o[2]="(".concat(o[2],") and (").concat(n,")")),t.push(o))}},t}},function(e,t,n){"use strict";var i,a={},r=function(){return void 0===i&&(i=Boolean(window&&document&&document.all&&!window.atob)),i},s=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}();function o(e,t){for(var n=[],i={},a=0;a<e.length;a++){var r=e[a],s=t.base?r[0]+t.base:r[0],o={css:r[1],media:r[2],sourceMap:r[3]};i[s]?i[s].parts.push(o):n.push(i[s]={id:s,parts:[o]})}return n}function l(e,t){for(var n=0;n<e.length;n++){var i=e[n],r=a[i.id],s=0;if(r){for(r.refs++;s<r.parts.length;s++)r.parts[s](i.parts[s]);for(;s<i.parts.length;s++)r.parts.push(p(i.parts[s],t))}else{for(var o=[];s<i.parts.length;s++)o.push(p(i.parts[s],t));a[i.id]={id:i.id,refs:1,parts:o}}}}function c(e){var t=document.createElement("style");if(void 0===e.attributes.nonce){var i=n.nc;i&&(e.attributes.nonce=i)}if(Object.keys(e.attributes).forEach((function(n){t.setAttribute(n,e.attributes[n])})),"function"==typeof e.insert)e.insert(t);else{var a=s(e.insert||"head");if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");a.appendChild(t)}return t}var u,h=(u=[],function(e,t){return u[e]=t,u.filter(Boolean).join("\n")});function f(e,t,n,i){var a=n?"":i.css;if(e.styleSheet)e.styleSheet.cssText=h(t,a);else{var r=document.createTextNode(a),s=e.childNodes;s[t]&&e.removeChild(s[t]),s.length?e.insertBefore(r,s[t]):e.appendChild(r)}}function b(e,t,n){var i=n.css,a=n.media,r=n.sourceMap;if(a&&e.setAttribute("media",a),r&&btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")),e.styleSheet)e.styleSheet.cssText=i;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(i))}}var d=null,y=0;function p(e,t){var n,i,a;if(t.singleton){var r=y++;n=d||(d=c(t)),i=f.bind(null,n,r,!1),a=f.bind(null,n,r,!0)}else n=c(t),i=b.bind(null,n,t),a=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return i(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;i(e=t)}else a()}}e.exports=function(e,t){(t=t||{}).attributes="object"==typeof t.attributes?t.attributes:{},t.singleton||"boolean"==typeof t.singleton||(t.singleton=r());var n=o(e,t);return l(n,t),function(e){for(var i=[],r=0;r<n.length;r++){var s=n[r],c=a[s.id];c&&(c.refs--,i.push(c))}e&&l(o(e,t),t);for(var u=0;u<i.length;u++){var h=i[u];if(0===h.refs){for(var f=0;f<h.parts.length;f++)h.parts[f]();delete a[h.id]}}}}},function(e,t,n){"use strict";n.r(t);var i=class{constructor(e="",t=!1){Object.defineProperty(this,"allEvents",{enumerable:!0,configurable:!0,writable:!0,value:new Set}),Object.defineProperty(this,"events",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"onceCallbacks",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"eventsPrefix",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"autoPrefix",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.eventsPrefix=e,this.autoPrefix=t}getEventName(e,t=this.autoPrefix){return this.eventsPrefix&&t?`${this.eventsPrefix}:${e}`:e}on(e,t){let n=this.getEventName(e);return this.events[n]=this.events[n]||new Set,this.events[n].add(t),this}off(e,t){let n=this.getEventName(e);return this.events[n]?(this.events[n].delete(t),this):this}one(e,t){let n=this.getEventName(e);return this.events[n]=new Set([t]),this}once(e,t){let n=this.getEventName(e);return this.events[n]=this.events[n]||new Set,this.events[n].add(t),this.onceCallbacks[n]=this.onceCallbacks[n]||new Set,this.onceCallbacks[n].add(t),this}onAll(e){return this.allEvents.add(e),this}offAll(e){return this.allEvents.delete(e),this}emit(e,t){let n=this.getEventName(e,!0);return this.allEvents.forEach(n=>n(e,t)),this.events[n]&&this.events[n].forEach(i=>{var a,r;i(t),null!==(a=this.onceCallbacks[n])&&void 0!==a&&null!==(r=a.has)&&void 0!==r&&r.call(a,i)&&(this.off(e,i),this.onceCallbacks[n].delete(i))}),this}};var a=(e,t,...n)=>{if("function"==typeof e)return e();if("string"==typeof e){const i=document.createDocumentFragment(),a=document.createElement(e);return n.forEach(e=>{if(e instanceof HTMLElement)i.appendChild(e);else if("string"==typeof e||"number"==typeof e){const t=document.createTextNode(e);i.appendChild(t)}}),a.appendChild(i),Object.assign(a,t),a}};var r=e=>!1===e||null==e||""===e;const s=(e=>{const t=()=>{};let n={log:t,warn:t,error:t};if(!e&&window.console){const e=(e,t)=>{e[t]=(...e)=>{window.console[t].apply(window.console,e)}};e(n,"log"),e(n,"warn"),e(n,"error")}return n})(!0);function o(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,c(e,t,"set"),n),n}function l(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,c(e,t,"get"))}function c(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var u=new WeakMap,h=new WeakMap,f=new WeakMap,b=class extends i{constructor(){super(),u.set(this,{writable:!0,value:null}),h.set(this,{writable:!0,value:null}),f.set(this,{writable:!0,value:e=>{this.emit("onPlaybackRateChange",e)}})}get controls(){return l(this,h)}getAvailablePlaybackRates(){return l(this,u).getAvailablePlaybackRates()}getPlaybackRate(){return l(this,u).getPlaybackRate()}setPlaybackRate(e){l(this,u).setPlaybackRate(e)}init(){let e=document.querySelector("#movie_player"),t=e.querySelector(".ytp-right-controls");e&&t?(o(this,u,e),o(this,h,t),l(this,u).addEventListener("onPlaybackRateChange",l(this,f))):s.error("YouTubePlayerController: При инициализации отсутствуют необходимые данные",{player:e,controls:t})}destroy(){l(this,u).removeEventListener("onPlaybackRateChange",l(this,f)),o(this,u,null),o(this,h,null)}},d=n(0),y=n.n(d);const p={playbackRateValue:1};var v=class{constructor(){var e,t,n;e=this,t="storage",n=new y.a("yt_speed_control",p,!0),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}get playbackRateValue(){return this.getPlaybackRateValue()}set playbackRateValue(e){this.setPlaybackRateValue(e)}getPlaybackRateValue(){return this.storage.get("playbackRateValue")}setPlaybackRateValue(e){this.storage.set("playbackRateValue",e)}},m=(n(3),n(1)),g=n.n(m),P=n(2),k=n.n(P);var w=e=>{let{value:t,onMinus:n,onPlus:i}=e;return a("div",{className:"PlaybackRateBtn ytp-button"},a("div",{className:"PlaybackRateBtn-inner"},a("div",{className:"PlaybackRateBtn-btn PlaybackRateBtn-minus",onclick:n},a("img",{className:"PlaybackRateBtn-chevron",src:g.a})),a("div",{className:"PlaybackRateBtn-btn PlaybackRateBtn-plus",onclick:i},a("img",{className:"PlaybackRateBtn-chevron",src:k.a})),a("div",{className:"PlaybackRateBtn-value"},t)))};function R(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var j=class extends i{constructor(e=1){super(),R(this,"container",null),R(this,"btn",null),R(this,"value",null),R(this,"onPlus",()=>{this.emit("plus")}),R(this,"onMinus",()=>{this.emit("minus")}),R(this,"setValue",e=>{e!==this.value&&(this.value=e,this.container&&this.update())}),this.value=e}init(e){if(!e)return void s.error("PlaybackRateView: При инициализации отсутствует контейнер");this.container=e;let{value:t,onMinus:n,onPlus:i}=this;this.btn=w({value:t,onMinus:n,onPlus:i}),this.container.insertAdjacentElement("afterbegin",this.btn)}update(){let e=this.btn,{value:t,onMinus:n,onPlus:i}=this;this.btn=w({value:t,onMinus:n,onPlus:i}),this.container.replaceChild(this.btn,e)}destroy(){this.btn?this.btn.remove():s.error("PlaybackRateView: При уничтожении отсутствует кнопка")}};function x(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function S(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,O(e,t,"set"),n),n}function E(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,O(e,t,"get"))}function O(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var _=new WeakMap,N=new WeakMap,C=new WeakMap,M=class{constructor(){_.set(this,{writable:!0,value:new v}),N.set(this,{writable:!0,value:null}),C.set(this,{writable:!0,value:new j(this.playbackRateValue)}),x(this,"decrementPlaybackRate",()=>{let e=this.getPrevPlaybackRateValue(this.playbackRateValue);if(!r(e))return this.setPlaybackRateValue(e),e}),x(this,"incrementPlaybackRate",()=>{let e=this.getNextPlaybackRateValue(this.playbackRateValue);if(!r(e))return this.setPlaybackRateValue(e),e}),x(this,"setPlaybackRateValue",e=>"number"!=typeof e?(s.error("Controller setPlaybackRateValue: Устанавливаемое значение должно быть числом"),!1):this.availablePlaybackRates.includes(e)?(E(this,_).playbackRateValue=e,E(this,C).setValue(e),E(this,N).getPlaybackRate()!==e&&E(this,N).setPlaybackRate(e),!0):(s.error("Controller setPlaybackRateValue: Устанавливаемое значение должно быть одним из допустимых значений: ",this.availablePlaybackRates),!1))}get playbackRateValue(){return E(this,_).playbackRateValue}get availablePlaybackRates(){return E(this,N).getAvailablePlaybackRates()}getPrevPlaybackRateValue(e){let t=this.availablePlaybackRates.findIndex(t=>t===e);if(r(t))return;let n=this.availablePlaybackRates[t-1];return r(n)?void 0:n}getNextPlaybackRateValue(e){let t=this.availablePlaybackRates.findIndex(t=>t===e);if(r(t))return;let n=this.availablePlaybackRates[t+1];return r(n)?void 0:n}init(e){e?(S(this,N,e),this.setPlaybackRateValue(this.playbackRateValue),E(this,N).on("onPlaybackRateChange",this.setPlaybackRateValue),E(this,C).init(E(this,N).controls),E(this,C).on("minus",this.decrementPlaybackRate),E(this,C).on("plus",this.incrementPlaybackRate)):s.error("Controller: При инициализации отсутствует контроллер плеера")}destroy(){E(this,N).off("onPlaybackRateChange",this.setPlaybackRateValue),E(this,C).off("minus",this.decrementPlaybackRate),E(this,C).off("plus",this.incrementPlaybackRate),E(this,C).destroy(),S(this,N,null)}},A=Object.defineProperty,T=(e,t,n)=>(((e,t,n)=>t in e?A(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n),n);class L{constructor(e="",t=!1){Object.defineProperty(this,"allEvents",{enumerable:!0,configurable:!0,writable:!0,value:new Set}),Object.defineProperty(this,"events",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"onceCallbacks",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"eventsPrefix",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"autoPrefix",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.eventsPrefix=e,this.autoPrefix=t}getEventName(e,t=this.autoPrefix){return this.eventsPrefix&&t?`${this.eventsPrefix}:${e}`:e}on(e,t){let n=this.getEventName(e);return this.events[n]=this.events[n]||new Set,this.events[n].add(t),this}off(e,t){let n=this.getEventName(e);return this.events[n]?(this.events[n].delete(t),this):this}one(e,t){let n=this.getEventName(e);return this.events[n]=new Set([t]),this}once(e,t){let n=this.getEventName(e);return this.events[n]=this.events[n]||new Set,this.events[n].add(t),this.onceCallbacks[n]=this.onceCallbacks[n]||new Set,this.onceCallbacks[n].add(t),this}onAll(e){return this.allEvents.add(e),this}offAll(e){return this.allEvents.delete(e),this}emit(e,t){let n=this.getEventName(e,!0);return this.allEvents.forEach(n=>n(e,t)),this.events[n]&&this.events[n].forEach(i=>{var a,r;i(t),null!=(r=null==(a=this.onceCallbacks[n])?void 0:a.has)&&r.call(a,i)&&(this.off(e,i),this.onceCallbacks[n].delete(i))}),this}}const I=(e,t)=>Object.assign({},t,e),V=e=>"string"==typeof e?document.querySelector(e):(null!=e&&e.$el&&"object"==typeof e.$el&&(e=e.$el),"object"==typeof e&&"addEventListener"in e?e:null),D="CTRL",B="SHIFT",K="ALT",z="META",J={CTRL:new Set(["ControlLeft","ControlRight"]),SHIFT:new Set(["ShiftLeft","ShiftRight"]),ALT:new Set(["AltLeft","AltRight"]),META:new Set(["MetaLeft","MetaRight"])},H=e=>{let t=new Set;const{ctrlKey:n,altKey:i,shiftKey:a,metaKey:r,code:s}=e;r&&t.add(z),n&&t.add(D),i&&t.add(K),a&&t.add(B);const o=(e=>{return e.replace(/Key|Digit/,"")})(s);let l=!1;for(const e of t){const t=J[e];if(!t)break;if(t.has(o)){l=!0;break}}return l||t.add(o),[...t].join("+")},W={el:null,autoEnable:!0,debug:!1,tabindex:0};class Q extends L{constructor(e={},t=[]){super(),T(this,"_options"),T(this,"_actions",[]),T(this,"_restoreTabindex",null),T(this,"_isEnabled",!1),T(this,"_onKeyDown",e=>{var t,n;const i=H(e);if(e.hotKey=i,this._options.debug){const t={event:e,hotKey:i};console.log(t),this.emit("debug",t)}(null!=(t=this.events[i])&&t.size||null!=(n=this.onceCallbacks[i])&&n.size)&&(this.emit("action",i),e.preventDefault()),this.emit("keydown",e),this.emit(i,e)}),this._options=I(e,W),e.el&&this._prepareElement(e.el),t.length&&this.setActions(t),this._options.autoEnable&&this.enable()}get isEnabled(){return this._isEnabled}setActions(e){return this._unsubscribeActions(),this._actions=e,this._subscribeActions(),this.emit("setActions",e),this}enable(e){if(this._isEnabled&&this.disable(),e&&this._prepareElement(e),this._options.el&&"object"==typeof this._options.el)return this._isEnabled=!0,this._options.el.addEventListener("keydown",this._onKeyDown),this.emit("enable"),this}disable(){if(this._options.el&&"object"==typeof this._options.el)return this._isEnabled=!1,this._options.el.removeEventListener("keydown",this._onKeyDown),this.emit("disable"),this}destroy(){this.disable(),this._unsubscribeActions(),this._restoreElement(),this._options=W,this._actions=[],this.emit("destroy")}toggleDebug(e){return this._options.debug=e,this}_subscribeActions(){this._actions.forEach(({hotKey:e,callback:t})=>this.on(e,t))}_unsubscribeActions(){this._actions.forEach(({hotKey:e,callback:t})=>this.off(e,t))}_prepareElement(e){e&&(this._restoreElement(),this._options.el=V(e),this._options.el&&"number"==typeof this._options.tabindex&&(this._restoreTabindex=this._options.el.getAttribute("tabindex"),this._options.el.setAttribute("tabindex",String(this._options.tabindex))))}_restoreElement(){!this._options.el||"object"!=typeof this._options.el||(this._restoreTabindex?this._options.el.setAttribute("tabindex",this._restoreTabindex):this._options.el.removeAttribute("tabindex"))}}function U(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,Z(e,t,"get"))}function G(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,Z(e,t,"set"),n),n}function Z(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var $=new WeakMap,F=new WeakMap,Y=new WeakMap;let q=new b,X=new M,ee=new class{constructor(){$.set(this,{writable:!0,value:null}),F.set(this,{writable:!0,value:null}),Y.set(this,{writable:!0,value:[{hotKey:"CTRL+Comma",callback:this.onDecrement.bind(this)},{hotKey:"CTRL+Period",callback:this.onIncrement.bind(this)}]})}init(e){G(this,F,e),G(this,$,new Q({el:"body",autoEnable:!0,tabindex:!0})),U(this,$).setActions(U(this,Y))}destroy(){var e,t;null===(e=U(this,$))||void 0===e||null===(t=e.destroy)||void 0===t||t.call(e),G(this,$,null),G(this,F,null)}onDecrement(){U(this,F)?U(this,F).decrementPlaybackRate():s.error("HotKeysController onDecrement: Отсутствует controller")}onIncrement(){U(this,F)?U(this,F).incrementPlaybackRate():s.error("HotKeysController onIncrement: Отсутствует controller")}};setTimeout(()=>{q.init(),X.init(q),ee.init(X)},2100)}]);